% arara: pdflatex

\documentclass[border=1in]{standalone}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage[portuguese]
{babel}

\usepackage{tikz}

\tikzstyle{isa} = [isosceles triangle, isosceles triangle apex angle=70, shape border rotate=270,
draw, black, thick, minimum size=3em]



\usetikzlibrary{er,positioning}

\begin{document}

\begin{tikzpicture}[auto,node distance=4cm]

  \node[entity] (pessoa) {Pessoa};
  
  \node[attribute] (data-nascimento) [above = 2.3cm of pessoa] {Data nascimento} edge (pessoa);
  
  \node[attribute] (nome) [left = 1cm of data-nascimento] {Nome} edge (pessoa);
  
  \node[attribute] (cpf) [right = 1cm of data-nascimento] {\underline{CPF}} edge (pessoa);
  
  \node[attribute] (endereco) [below left = 2cm of data-nascimento] {Endereço} edge (pessoa);
  
  \node[attribute] (instituicao) [below left = 2cm of pessoa] {Instituição} edge (pessoa);
  
  
  \node[attribute] (login) [below = 1cm of endereco] {Login} edge (pessoa);
  
  \node[attribute] (senha) [below = 1.2cm of cpf] {Senha} edge (pessoa);

  \node[relationship] (rel1) [right = 4cm of pessoa] {} edge (pessoa) ;
  
  \node[entity] (perfil) [right = 4cm of rel1] {Perfil} edge (rel1);

  \node[attribute] (codigo-perfil) [above = 1cm of perfil] {\underline{Código perfil}} edge (perfil);

  \node[attribute] (tipo-perfil) [right = 2cm of perfil] {Tipo perfil} edge (perfil);

%  \node[attribute] (visitante) [above right = 2cm of tipo-perfil] {Visitante} edge (tipo-perfil);

 % \node[attribute] (academico) [above left = 2cm of tipo-perfil] {Acadêmico} edge (tipo-perfil);

 % \node[attribute] (administrativo) [above = 2cm of tipo-perfil] {Administrativo} edge (tipo-perfil);

  \node[relationship] (rel2) [below right = 2cm of perfil] {} edge (perfil) ;

  \node[entity] (servico) [below = 2cm of rel2] {Serviço} edge (rel2);

  \node[attribute] (codigo-servico) [above right = 2cm of servico] {\underline{Código serviço}} edge (servico);
  
  \node[attribute] (descricao) [right = 2cm of servico] {Descrição} edge (servico);

  \node[attribute] (servico-tipo) [below left = 1.7cm of descricao] {Tipo serviço} edge (servico);

 % \node[attribute] (visualizacao) [below right = 1cm of servico-tipo] {Visualização} edge (servico-tipo);
  
%  \node[attribute] (insercao) [below left = 1.5cm of servico-tipo] {Inserção} edge (servico-tipo);
  
%  \node[attribute] (alteracao) [right = 1.5cm of servico-tipo] {Alteração} edge (servico-tipo);

%  \node[attribute] (remocao) [below = 1.5cm of servico-tipo] {Remoção} edge (servico-tipo);
  
  \path (rel1) edge node [above] {$n$} (pessoa);
  \path (rel1) edge node [above] {$m$}(perfil);

  \path (rel2) edge node [above right] {$1$} (perfil);

  \path (rel2) edge node [right] {$m$} (servico);
 
  \node[isa] (especializacao) [right = 3.5cm of instituicao] {} edge (pessoa);

  \node[entity] (docente) [below left = 1cm of especializacao] {Docente} edge (especializacao);
  
  \node[entity] (funcionario) [right = 6cm of docente] {Funcionário} edge (especializacao);

  \node[entity] (aluno) [below right = 4cm of especializacao] {Aluno} edge (especializacao);

  \node[attribute] (docente-especialidade) [left = 0.6cm of docente]{Especialidade} edge (docente);

  \node[attribute] (docente-funcao-tecnica) [below = 1cm of docente-especialidade] {Função técnica} edge (docente);

  \node[entity] (disciplina) [below = 4cm of docente] {Disciplina};
 
  
  \node[attribute] (funcionario-especialidade) [below = 0.8cm of rel1] {Especialidade} edge (funcionario);
  
  
  \node[attribute] (funcionario-funcao-tecnica) [left = 0.8cm of rel2] {Função técnica} edge (funcionario);

  \node[attribute] (curso) [right = 1cm of aluno] {Curso} edge (aluno);
  
  \node[attribute] (nota-ingresso) [below right = 1cm of aluno] {Nota ingresso} edge (aluno);
  
  \node[attribute] (nome-disciplina) [left = 2cm of disciplina] {Nome} edge (disciplina);

  \node[attribute] (ementa) [below = 1cm of nome-disciplina] {Ementa} edge (disciplina);
  
  \node[attribute] (codigo-disciplina) [below = 1.2cm of disciplina] {\underline{Código disciplina}} edge (disciplina);
  
  
  \node[attribute] (data-criacao) [above left = 0.8cm of disciplina] {Data criação} edge (disciplina);

  \node[relationship] (rel3) [below right = 3.5cm of docente] {} edge (docente) edge (disciplina) edge (aluno);
  \node[attribute] (nota-obtida) [right = 0.5cm of codigo-disciplina] {Nota obtida} edge (rel3);
  
  \node[attribute] (data-inicio) [right = 0.5cm of nota-obtida] {Data início} edge (rel3);
  
  \node[attribute] (data-fim) [right = 0.5cm of data-inicio] {Data fim} edge (rel3);
  
  \path (rel3) edge node [above right] {$n$} (docente);

  \path (rel3) edge node [above left] {$m$} (disciplina);
  
  \path (rel3) edge node [above] {$o$} (aluno);

   
  \path (especializacao) edge node [below left] {\{Parcial\}} (pessoa);
  
  
\end{tikzpicture}
    


\end{document}
